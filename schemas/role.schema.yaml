## =============================================================================
## TMDL - TeamMate Description Language
## Schema para Roles Tipo Reutilizables v1.0
## =============================================================================

$schema: "http://json-schema.org/draft-07/schema#"
$id: "https://tmdl.io/schemas/role.schema.yaml"
title: "TMDL Role Schema"
description: "Schema para definir roles tipo reutilizables"
version: "1.0.0"

type: object
required:
  - role_type
  - metadata
  - definition

properties:

  ## ===========================================================================
  ## IDENTIFICACI칍N DEL TIPO DE ROL
  ## ===========================================================================
  role_type:
    type: object
    required:
      - id
      - name
      - category
    properties:
      id:
        type: string
        description: "Identificador 칰nico del rol tipo"
        pattern: "^[a-z][a-z0-9_-]*$"
        examples:
          - "analyst"
          - "researcher"
          - "devils-advocate"
      name:
        type: string
        description: "Nombre legible del rol"
        examples:
          - "Analista"
          - "Investigador"
          - "Abogado del Diablo"
      category:
        type: string
        description: "Categor칤a del rol"
        enum:
          - functional     # Basado en funci칩n (analyst, designer, etc.)
          - cognitive      # Basado en estilo de pensamiento
          - hybrid         # Combina funci칩n y estilo
      icon:
        type: string
        description: "Emoji o icono representativo"
        examples:
          - "游늵"
          - "游댌"
          - "游땓"

  ## ===========================================================================
  ## METADATA DEL ROL TIPO
  ## ===========================================================================
  metadata:
    type: object
    required:
      - version
      - author
    properties:
      version:
        type: string
        pattern: "^[0-9]+\\.[0-9]+(\\.[0-9]+)?$"
      author:
        type: string
      description:
        type: string
        description: "Descripci칩n del prop칩sito de este rol tipo"
      use_cases:
        type: array
        description: "Casos de uso recomendados"
        items:
          type: string
      not_suitable_for:
        type: array
        description: "Casos donde NO es recomendable"
        items:
          type: string
      compatible_with:
        type: array
        description: "Roles con los que combina bien en un equipo"
        items:
          type: string
      complementary_to:
        type: array
        description: "Roles que complementa (cubren debilidades mutuas)"
        items:
          type: string

  ## ===========================================================================
  ## DEFINICI칍N DEL ROL
  ## Valores por defecto que hereda un TeamMate al usar extends
  ## ===========================================================================
  definition:
    type: object
    description: "Definici칩n completa del rol tipo"
    properties:

      ## -----------------------------------------------------------------------
      ## DESCRIPCI칍N GENERAL
      ## -----------------------------------------------------------------------
      summary:
        type: string
        description: "Resumen de una l칤nea del rol"
      detailed_description:
        type: string
        description: "Descripci칩n detallada del rol y su prop칩sito"

      ## -----------------------------------------------------------------------
      ## PERSONALIDAD POR DEFECTO
      ## -----------------------------------------------------------------------
      default_personality:
        type: object
        properties:
          traits:
            type: array
            description: "Rasgos de personalidad caracter칤sticos"
            items:
              type: string
            examples:
              - ["meticuloso", "curioso", "esc칠ptico", "orientado a datos"]
          tone:
            type: string
            enum: [formal, professional, friendly, casual, enthusiastic, neutral]
          cognitive_style:
            type: string
            enum: [devils_advocate, optimist, pragmatist, visionary, analytical, creative, balanced]
          communication_patterns:
            type: array
            description: "Patrones de comunicaci칩n t칤picos"
            items:
              type: string
            examples:
              - "Siempre pide datos que respalden afirmaciones"
              - "Hace preguntas antes de opinar"

      ## -----------------------------------------------------------------------
      ## EXPERTISE POR DEFECTO
      ## -----------------------------------------------------------------------
      default_expertise:
        type: array
        description: "츼reas de expertise t칤picas del rol"
        items:
          type: object
          properties:
            domain:
              type: string
            level:
              type: string
              enum: [basic, intermediate, advanced, expert]
            typical_tasks:
              type: array
              items:
                type: string

      ## -----------------------------------------------------------------------
      ## RESPONSABILIDADES T칈PICAS
      ## -----------------------------------------------------------------------
      typical_responsibilities:
        type: array
        description: "Responsabilidades que suele asumir este rol"
        items:
          type: string

      ## -----------------------------------------------------------------------
      ## BOUNDARIES POR DEFECTO
      ## -----------------------------------------------------------------------
      default_boundaries:
        type: object
        properties:
          can_do:
            type: array
            items:
              type: string
          cannot_do:
            type: array
            items:
              type: string
          should_delegate:
            type: array
            description: "Tareas que deber칤a delegar a otros roles"
            items:
              type: object
              properties:
                task:
                  type: string
                delegate_to:
                  type: string
                  description: "Rol recomendado"

      ## -----------------------------------------------------------------------
      ## COLABORACI칍N POR DEFECTO
      ## -----------------------------------------------------------------------
      default_collaboration:
        type: object
        properties:
          interaction_mode:
            type: string
            enum: [reactive, proactive, balanced]
          initiative_level:
            type: string
            enum: [low, medium, high]
          feedback_style:
            type: string
            enum: [direct, diplomatic, socratic, constructive]
          conflict_approach:
            type: string
            enum: [avoid, accommodate, compromise, collaborate, compete]

      ## -----------------------------------------------------------------------
      ## PROTOCOLOS POR DEFECTO
      ## -----------------------------------------------------------------------
      default_protocols:
        type: object
        properties:
          on_task_assignment:
            type: string
          on_review_request:
            type: string
          on_disagreement:
            type: string
          on_blocked:
            type: string

      ## -----------------------------------------------------------------------
      ## TOOLS POR DEFECTO
      ## Comandos t칤picos que incluye este rol
      ## -----------------------------------------------------------------------
      default_tools:
        type: object
        properties:
          commands:
            type: array
            items:
              type: object
              required:
                - name
                - description
                - prompt
              properties:
                name:
                  type: string
                display_name:
                  type: string
                description:
                  type: string
                prompt:
                  type: string
          decorators:
            type: array
            items:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                prompt:
                  type: string

      ## -----------------------------------------------------------------------
      ## BEHAVIORS POR DEFECTO
      ## -----------------------------------------------------------------------
      default_behaviors:
        type: object
        properties:
          on_greeting:
            type: string
          on_help:
            type: string
          guardrails:
            type: array
            items:
              type: string

      ## -----------------------------------------------------------------------
      ## FRASES Y PATRONES CARACTER칈STICOS
      ## -----------------------------------------------------------------------
      signature_phrases:
        type: array
        description: "Frases o muletillas caracter칤sticas del rol"
        items:
          type: string
        examples:
          - "쯊enemos datos que respalden esto?"
          - "Interesante... d칠jame investigar"
          - "He encontrado que..."

      ## -----------------------------------------------------------------------
      ## PREGUNTAS QUE SUELE HACER
      ## -----------------------------------------------------------------------
      typical_questions:
        type: array
        description: "Preguntas que este rol suele plantear"
        items:
          type: string
        examples:
          - "쮺u치l es la fuente de esta informaci칩n?"
          - "쮿emos considerado la alternativa de...?"

      ## -----------------------------------------------------------------------
      ## OUTPUTS T칈PICOS
      ## -----------------------------------------------------------------------
      typical_outputs:
        type: array
        description: "Tipos de entregables que produce"
        items:
          type: object
          properties:
            type:
              type: string
              examples:
                - "Informe de an치lisis"
                - "Matriz DAFO"
                - "Estudio de mercado"
            format:
              type: string
              examples:
                - "documento estructurado"
                - "tabla comparativa"
                - "lista priorizada"
            description:
              type: string
